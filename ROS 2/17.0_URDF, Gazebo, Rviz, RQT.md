# URDF： 机器人建模

Unified Robot Description Format. 统一机器人描述格式。   
< link>: 描述某个刚体部分的外观和物理属性。  
< joint>: 描述两个link之间的关系，描述关节的运动学和动力学属性（运动位置和速度限制）。  
< robot>: 描述完整的机器人模型的最顶层标签。   

用pdf查看urdf的整体关系,在urdf的工作空间下：  
`urdf_to_graphviz # 然后跟要看的urdf模型文件`  

# Gazebo： 三维物理仿真平台

启动gazebo  
`sudo apt install ros-humble-gazebo-*  #安装所有gazebo相关的东西`  
`ros2 launch gazebo_ros gazebo.launch.py #启动gazebo`  

---
然而上述的启动对我的电脑没有作用，可能是虚拟机资源跟不上的原因，可以使用以下代码作为替换：  
`ros2 launch gazebo_ros gazebo.launch.py gzclient:=false # 先启动 gazebo 服务器`   
`gzclient  # 然后在另一个终端启动客户端`  

---
或者也有另一个方法解决了问题：  
`killall -9 gzserver gzclient  #首先要确保gazebo进程都被完全关闭了`   
```txt
source  /usr/share/gazebo/setup.sh
# 或者
source  /usr/share/gazebo-11/setup.sh
# 就解决了 但是不知道why   
```      

# XACRO： 模型文件 -- URDF 的进化版
## --从这里之后基本看不懂了
精简模型代码：创建宏定义，文件包含；  
提供可编程接口：常量，变量，数学计算，条件语句。  

`sudo apt install ros-humble-xacro # 进行安装`   
/learning_gazebo 里面的launch，以及urdf等文件都是相关需要了解的构建方法。   

最终的小车运动仿真：  
`ros2 launch learning_gazebo load_urdf_into_gazebo.launch.py`  
`ros2 run teleop_twist_keyboard teleop_twist_keyboard`   

# RVIZ: 三维可视化显示平台
启动rviz：  
`ros2 run rviz2 rviz2`  

运动仿真，然后rviz可视化（单目相机）：  
`ros2 launch learning_gazebo load_mbot_camera_into_gazebo.launch.py  # 把一个camera嵌入到gazebo中`   
`ros2 run rviz2 rviz2  #然后add image的节点，订阅image的话题，就能显示出来图像了`   

运动仿真，然后rviz可视化（rgb-d相机）： 
`ros2 launch learning_gazebo load_mbot_rgbd_into_gazebo.launch.py # 把rgb-d相机嵌入到gazebo中`  
`ros2 run rviz2 rviz2  #然后add pointscloud2的节点，订阅话题；然后把全局坐标的fixed frame设置为odom，就能显示出来三维点云图像了`    

运动仿真，然后rviz可视化（激光雷达）： 
`ros2 launch learning_gazebo load_mbot_laser_into_gazebo.launch.py # 把rgb-d相机嵌入到gazebo中`    
`ros2 run rviz2 rviz2  #然后add laserscan的节点，订阅话题；然后把全局坐标的fixed frame设置为odom，就能显示出来三维点云图像了（可以放大laser的size，更清楚看见）`    

# RQT:模块化可视化工具
安装指令：  
`sudo apt install ros-humble-rqt`  
`rqt`  

然后在plugin部分进行添加即可。（可以发布话题，发布订阅，查看日志，绘图等）  
 




