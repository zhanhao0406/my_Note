# 节点
官网链接：[官网](https://docs.ros.org/en/humble/Tutorials/Understanding-ROS2-Nodes.html "但是例子太过简单") 但是例子太过简单

## 面向 *过程* 编程
1. 编程接口初始化
2. 创建节点并初始化
3. 实现节点功能
4. 销毁节点并关闭接口

## 面向 *对象* 编程 （<mark>更推荐</mark>）
流程相同，但编码方式有改变。  
以C++举例(pwd:/home/ros2/dev_ws/src/ros2_21_tutorials/learning_node_cpp/src/node_helloworld_class.cpp)，（代码来源参考ROS 2 / 6.0 中）：   
```c++

#include <unistd.h>                        // C语言标准库头文件, 这里主要用来使用sleep()函数。
#include "rclcpp/rclcpp.hpp"              // ROS2的C++客户端库的头文件，写ROS2节点必须包含。
/***
创建一个HelloWorld节点, 初始化时输出“hello world”日志
***/
class HelloWorldNode : public rclcpp::Node      //定义一个HelloWorldNode的类，继承自rclcpp::Node。继承：HelloWorldNode是一个Node，有Node的所有特性，也可以添加自己的特性。
{
    public:
        HelloWorldNode()                  //类的构造函数，创建这个类的对象时，构造函数会被自动调用。
        : Node("node_helloworld_class")                          // ROS2节点父类初始化，调用Node的构造函数，括号内传入节点名称
        {
            while(rclcpp::ok())                                  // ROS2系统是否正常运行
            {
                RCLCPP_INFO(this->get_logger(), "Hello World");  // ROS2日志输出。this->get_logger()是获取这个节点的日志器。
                sleep(1);                                        // 休眠控制循环时间
            }
        }
};
// ROS2节点主入口main函数
int main(int argc, char * argv[])                               
{

    // 第一点接口初始化。ROS2 C++接口初始化。初始化ROS2的C++库，必须首先调用。
    rclcpp::init(argc, argv);        
    
    // 第二点节点初始化。创建ROS2节点对象并进行初始化 。 rclcpp::spin()进入自旋循环，它会一直运行，直到节点被终止。               
    rclcpp::spin(std::make_shared<HelloWorldNode>());  // 第四点实现节点功能。std::make_shared<HelloWorldNode>() 创建一个HelloWorldNode类的共享指针，方便内存管理。
    
    // 关闭ROS2 C++接口
    rclcpp::shutdown();          // 对应第四点，关闭ROS2，释放资源  。                   
    
    return 0;
}
```
---
---
## 举例子 For example.
1. Opencv的检测苹果的图片的node(python only)。(pwd:/home/ros2/dev_ws/src/ros2_21_tutorials/learning_node/learning_node/node_object.py)
2. 使用相机，实时检测（也是python only）。(pwd:/home/ros2/dev_ws/src/ros2_21_tutorials/learning_node/learning_node/node_object_webcam.py)


